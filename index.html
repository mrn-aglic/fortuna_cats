<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <title>Cats</title>

    <link rel="stylesheet" href="stylesheets/css/styles.css">
    <link rel="stylesheet" href="stylesheets/css/carousel.css">

    <script type="module" src="/repositories/cats_repository.js"></script>
    <script type="module" src="/classes/cat.js"></script>
    <script type="module" src="/classes/catcontainer.js"></script>

    <script type="module">

        // import {Cat} from './classes/cat.js';
        import {Cats} from './classes/catcontainer.js';
        import getCats from './repositories/cats_repository.js';

        function createImgFromCat(cat) {
            const img = document.createElement('img');
            img.src = cat.url;
            img.setAttribute('width', '200px');
            img.setAttribute('height', '200px');
            return img;
        }

        function addButtonsToCarousel(carousel) {
            const prev = document.createElement('div');
            const next = document.createElement('div');

            prev.setAttribute('class', 'btn-prev');
            next.setAttribute('class', 'btn-next');

            carousel.appendChild(prev);
            carousel.appendChild(next);
        }

        window.onload = async function () {
            const carousel = document.getElementById('carousel');
            addButtonsToCarousel(carousel);

            const lastchild = carousel.childNodes[carousel.childNodes.length - 2];

            const catsArr = await getCats();
            const cats = new Cats(catsArr);

            const carouselCats = cats.getYoungest();

            for (let c of carouselCats) {
                const img = createImgFromCat(c);
                carousel.insertBefore(img, lastchild);
                console.log(img)
            }
        }
    </script>
</head>
<body>
<div id="carousel-container">
    <div id="carousel"></div>
</div>
</body>
</html>